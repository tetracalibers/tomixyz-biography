---
title: Lighting - wgpuで動かすシェーダーの世界
date: "2024-10-27"
description: TODO
series: ja/wgpu-shader-world
tags:
  - Rust
  - WebGPU
  - wgpu
  - WGSL
---

## ライトの種類

## 反射モデル

### 拡散反射光：Lambert拡散反射モデル

「光が強く当たっている面は明るく、光があまり当たっていない面は暗くなっていく」という関係を数式でモデル化する

- 法線：面の向きを表す3次元ベクトル（物体の面の各点から、面と垂直になるように、物体の外側に向かって伸びるベクトル）
- 内積：その性質から、「2つのベクトルの向きの近さ」を求める演算ともいえる

内積の結果は、2つのベクトルの向きが大きく異なれば異なるほど数値が小さくなっていき、逆向きになるとマイナスになる
（2つのベクトルの間の角度を使って求めることもできるため、その角度の大きさ＝向きがどれくらい違うか？が反映された値になる）

ライトが物体の表面に向けて当てられているとしたら、

- その光が真っ直ぐ当たる面において、法線と光の方向は逆向きになる（法線は物体の外側に向かって伸びているため、光源に向かうベクトルとなる）
- つまり、最も光が強く当たる面で、法線と光の方向の内積はマイナスになる

しかし、「光の強さ」を表す値は、光が強いほど大きく、光が弱いほど小さくなるようにしたい

- そこで、光の方向ベクトルを逆向きにしてから、法線との内積を求めるようにする（これを「光の強さ」とする）
