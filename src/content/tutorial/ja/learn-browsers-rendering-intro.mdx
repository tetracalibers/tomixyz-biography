---
title: レンダリングエンジンの構成
date: "2024-06-12"
description: TODO
private: true
series: ja/learn-browsers-rendering
tags:
  - Browser
  - HTML
  - CSS
---

TODO: 以下を読んで加筆する

- https://limpet.net/mbrubeck/2014/08/08/toy-layout-engine-1.html
- https://browserbook.shift-js.info/
- https://viethung.space/blog/2020/05/29/Browser-from-Scratch-Introduction/

## レンダリングエンジンのメインフロー

1. Pasing HTML to construct the DOM tree
2. Render tree construction
3. Layout of the render tree
4. Painting the render tree

### 1. Parsing

ネットワークから取得されたHTMLとCSS（Style Sheets）は、それぞれHTML ParserとCSS Parserによって解析され、扱いやすいオブジェクトに変換される。

| Source | Process     | Result Object |
| ------ | ----------- | ------------- |
| HTML   | HTML Parser | DOM Tree      |
| CSS    | CSS Parser  | Style Rules   |

TODO: Style RulesとCSSOMの違いを調べる

### 2. Attachment

次に、DOM TreeとStyle Rulesを合体させて、「どのDOMにどのスタイルを当てるべきか？」などをまとめたオブジェクト（Render Tree）を構築する。

### 3. Layout

### 4. Painting

## レンダリングエンジンのコンポーネント

### HTML Parser

- https://web.dev/articles/howbrowserswork?hl=ja#html_parser

プロジェクトでは、`dom`クレートと`fast_html`クレートで実装する。

### CSS Parser

- https://web.dev/articles/howbrowserswork?hl=ja#css_parsing

プロジェクトでは、`css`クレートで実装する。

### Style

- https://web.dev/articles/howbrowserswork?hl=ja#render_tree_construction

プロジェクトでは、`css_defs`クレートと`style`クレートで実装する。

### Layout

- https://web.dev/articles/howbrowserswork?hl=ja#layout
- https://web.dev/articles/howbrowserswork?hl=ja#css2_visual_model

### Painting

- https://web.dev/articles/howbrowserswork?hl=ja#painting

---

## 参考リンク

- [ブラウザの仕組み - web.dev](https://web.dev/articles/howbrowserswork?hl=ja)
