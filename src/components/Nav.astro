---
import { toTitleCase } from "$/utils"
import { NAV_ITEMS, SITE } from "$/config"

const root = (path: string) => path.replace(SITE.base, "").split("/").filter(Boolean)[0]
const isCurrent = (path: string) => root(path) === root(Astro.url.pathname)

const navItems = Object.keys(NAV_ITEMS).map((navItemKey) => ({
  ...NAV_ITEMS[navItemKey],
  isCurrent: isCurrent(NAV_ITEMS[navItemKey].path)
}))
---

<nav class="nav py-3">
  <ul class="nav-list dark:text-theme-dark-secondary">
    {
      navItems.map((item) => (
        <li>
          <a
            class:list={[`pb-1`, { "border-b-2 border-theme-primary": item.isCurrent }]}
            href={item.path}
            title={item.title}
          >
            {toTitleCase(item.title)}
          </a>
        </li>
      ))
    }
  </ul>
</nav>
<style>
  .nav-list {
    @apply inline-flex list-none gap-8 text-xl font-semibold text-theme-secondary dark:text-theme-dark-secondary py-2 flex-wrap mb-8;
  }
</style>
