---
import { Image } from "astro:assets"
interface Props {
  src: ImageMetadata
  alt?: string
  maxHeight?: number
  optimization?: boolean
}

const { src, alt = "", maxHeight = 250, optimization = true } = Astro.props
---

{optimization && <Image class='fluid-image' src={src} alt={alt} style={`--max-height: ${maxHeight}px`} />}
{!optimization && <img class='fluid-image' src={src.src} />}

<style>
  .fluid-image {
    --fluid-bp-320-600: calc((100vw - 320px) / (600 - 320));
    --__space: clamp(16px, (16px + (68 - 16) * var(--fluid-bp-320-600)), 68px);

    width: 100%;
    height: auto;
    max-height: calc(var(--max-height) + var(--__space) * 2);

    box-sizing: border-box;

    object-position: center;
    object-fit: contain;
  }
</style>
